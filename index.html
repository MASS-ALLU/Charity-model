<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Delivering transparent global impact. Make a secure donation and download an instant receipt.">
<title>The Elite Global Humanity Foundation</title>

<!-- jsPDF for receipt generation -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root {
  --primary-navy: #1C2E4A;
  --dark-navy: #142338;
  --accent-blue: #2E4C73;
  --soft-grey: #F4F6F8;
  --light-grey: #E6E9EE;
  --white: #FFFFFF;
  --success: #0F766E;
  --danger: #B42318;
  --shadow: 0 10px 30px rgba(0,0,0,0.10);
  --radius: 10px;
  --max: 1080px;
}

/* Theme */
html { color-scheme: light; }
html[data-theme="dark"] { color-scheme: dark; }
html[data-theme="dark"] {
  --soft-grey: #0B1220;
  --light-grey: rgba(255,255,255,0.12);
  --white: #0F172A;
  --primary-navy: #E5E7EB;
  --dark-navy: #070C16;
  --accent-blue: #7AA2D6;
  --shadow: 0 12px 34px rgba(0,0,0,0.45);
}

body {
  margin: 0;
  font-family: Georgia, serif;
  background-color: var(--soft-grey);
  color: var(--primary-navy);
  line-height: 1.5;
}

header {
  background: var(--white);
  padding: 14px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  position: sticky;
  top: 0;
  z-index: 10;
}

header nav {
  display: flex;
  align-items: center;
  gap: 10px;
}

.nav-link {
  appearance: none;
  border: 0;
  background: transparent;
  padding: 8px 10px;
  border-radius: 8px;
  color: var(--primary-navy);
  font-weight: 600;
  cursor:pointer;
}

.nav-link:hover {
  background: rgba(28,46,74,0.06);
}

html[data-theme="dark"] .nav-link:hover {
  background: rgba(255,255,255,0.08);
}

.container {
  max-width: var(--max);
  margin: 0 auto;
}

.skip-link {
  position: absolute;
  left: -9999px;
  top: 10px;
  background: var(--white);
  color: var(--primary-navy);
  padding: 10px 12px;
  border-radius: 8px;
  box-shadow: var(--shadow);
}
.skip-link:focus {
  left: 10px;
}

.hero {
  background: var(--primary-navy);
  color: white;
  text-align: center;
  padding: 80px 20px;
  position: relative;
  overflow: hidden;
}

.hero::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(900px 380px at 20% 20%, rgba(255,255,255,0.16), transparent 60%),
    radial-gradient(700px 280px at 85% 40%, rgba(46,76,115,0.28), transparent 55%),
    linear-gradient(180deg, rgba(0,0,0,0.08), rgba(0,0,0,0));
  pointer-events: none;
}

.hero .container { position: relative; z-index: 1; }

.btn-primary {
  background: var(--accent-blue);
  color: white;
  padding: 12px 18px;
  border: none;
  cursor: pointer;
  border-radius: 10px;
  font-weight: 600;
  margin-top: 20px;
  transition: transform 140ms ease, filter 140ms ease;
}

.btn-primary:hover { filter: brightness(1.05); transform: translateY(-1px); }
.btn-primary:active { transform: translateY(0px); }

.btn-primary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-secondary {
  background: transparent;
  color: var(--primary-navy);
  padding: 10px 14px;
  border: 1px solid var(--light-grey);
  cursor: pointer;
  border-radius: 10px;
  font-weight: 600;
  transition: transform 140ms ease, background 140ms ease;
}

.btn-secondary:hover { transform: translateY(-1px); background: rgba(28,46,74,0.04); }
html[data-theme="dark"] .btn-secondary:hover { background: rgba(255,255,255,0.06); }

section { padding: 60px 20px; }
.white-section { background: var(--white); }
.beige-section { background: var(--light-grey); }

.payment-card {
  background: var(--white);
  padding: 30px;
  max-width: 500px;
  margin: auto;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  border-top: 5px solid var(--primary-navy);
}

input, textarea, select {
  width: 100%;
  padding: 12px;
  margin-bottom: 15px;
  border: 1px solid var(--light-grey);
  border-radius: 4px;
  box-sizing: border-box;
  background: var(--white);
  color: var(--primary-navy);
}

html[data-theme="dark"] input,
html[data-theme="dark"] textarea,
html[data-theme="dark"] select {
  background: rgba(255,255,255,0.06);
  border-color: rgba(255,255,255,0.14);
}

.chip-group {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin: 8px 0 14px;
}

.chip {
  border: 1px solid var(--light-grey);
  background: rgba(244,246,248,0.65);
  color: var(--primary-navy);
  border-radius: 999px;
  padding: 8px 12px;
  font-weight: 700;
  cursor: pointer;
}

html[data-theme="dark"] .chip {
  background: rgba(255,255,255,0.06);
  border-color: rgba(255,255,255,0.14);
}

.chip[aria-pressed="true"] {
  border-color: rgba(46,76,115,0.55);
  box-shadow: 0 0 0 3px rgba(46,76,115,0.18);
}

.segmented {
  display: inline-flex;
  border: 1px solid var(--light-grey);
  border-radius: 12px;
  overflow: hidden;
  background: rgba(244,246,248,0.55);
  margin-bottom: 15px;
}
html[data-theme="dark"] .segmented {
  background: rgba(255,255,255,0.06);
  border-color: rgba(255,255,255,0.14);
}

.segmented input { position: absolute; opacity: 0; pointer-events: none; }
.segmented label {
  padding: 10px 12px;
  font-weight: 800;
  cursor: pointer;
  user-select: none;
}
.segmented input:checked + label {
  background: rgba(46,76,115,0.14);
}
html[data-theme="dark"] .segmented input:checked + label {
  background: rgba(122,162,214,0.18);
}

.breakdown {
  margin-top: 18px;
  padding: 16px;
  border-radius: 12px;
  border: 1px solid var(--light-grey);
  background: rgba(244,246,248,0.65);
}
html[data-theme="dark"] .breakdown {
  background: rgba(255,255,255,0.06);
  border-color: rgba(255,255,255,0.14);
}

.breakdown h3 { margin: 0 0 10px; }
.bar {
  height: 10px;
  border-radius: 999px;
  overflow: hidden;
  background: rgba(28,46,74,0.10);
}
html[data-theme="dark"] .bar { background: rgba(255,255,255,0.10); }
.bar > span { display: block; height: 100%; float: left; }
.bar .programs { background: rgba(15,118,110,0.85); width: 70%; }
.bar .ops { background: rgba(46,76,115,0.9); width: 20%; }
.bar .fundraising { background: rgba(180,35,24,0.75); width: 10%; }

.breakdown-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 8px;
  margin-top: 10px;
}

.breakdown-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  font-size: 14px;
}

.dot { width: 10px; height: 10px; border-radius: 999px; display: inline-block; margin-right: 8px; }

/* Subtle scroll-in animations */
.reveal {
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 520ms ease, transform 520ms ease;
}
.reveal.is-visible { opacity: 1; transform: translateY(0); }

/* Confetti */
.confetti {
  position: fixed;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 9999;
}
.confetti-piece {
  position: absolute;
  width: 10px;
  height: 14px;
  opacity: 0.95;
  transform: translateY(-10px);
  animation: confetti-fall 1200ms linear forwards;
}
@keyframes confetti-fall {
  to { transform: translateY(110vh) rotate(720deg); opacity: 1; }
}

.field label {
  display: block;
  font-size: 14px;
  margin-bottom: 6px;
  font-weight: 600;
}

.help {
  margin: -10px 0 14px;
  font-size: 13px;
  color: rgba(28,46,74,0.8);
}

.row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

.notice {
  margin-top: 14px;
  padding: 12px 12px;
  border-radius: 10px;
  border: 1px solid var(--light-grey);
  background: rgba(244,246,248,0.7);
}
.notice[hidden] { display: none; }
.notice.success { border-color: rgba(15,118,110,0.25); background: rgba(15,118,110,0.08); color: #0b4b45; }
.notice.error { border-color: rgba(180,35,24,0.25); background: rgba(180,35,24,0.08); color: #7a1a12; }

.qr-box {
  text-align: center;
  padding: 20px;
  border: 1px solid var(--light-grey);
  border-radius: 10px;
}

.qr-box img {
  border-radius: 10px;
}

.report-box {
  background: var(--white);
  padding: 25px;
  margin-bottom: 20px;
  border-left: 6px solid var(--accent-blue);
}

.section-title {
  text-align: center;
  margin-top: 0;
}

.lead {
  text-align: center;
  margin: 0 auto 22px;
  max-width: 70ch;
  opacity: 0.9;
}

.grid-3 {
  display: grid;
  grid-template-columns: 1fr;
  gap: 16px;
}

.card {
  background: var(--white);
  border: 1px solid var(--light-grey);
  border-radius: 14px;
  overflow: hidden;
  box-shadow: 0 8px 22px rgba(0,0,0,0.06);
}
html[data-theme="dark"] .card {
  box-shadow: 0 10px 26px rgba(0,0,0,0.35);
}

.card .content {
  padding: 16px 16px 18px;
}

.card img {
  width: 100%;
  height: 190px;
  object-fit: cover;
  display: block;
  background: rgba(28,46,74,0.06);
}

.tag {
  display: inline-block;
  font-size: 12px;
  font-weight: 800;
  letter-spacing: 0.02em;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--light-grey);
  background: rgba(244,246,248,0.65);
}
html[data-theme="dark"] .tag {
  background: rgba(255,255,255,0.06);
  border-color: rgba(255,255,255,0.14);
}

.card h3 {
  margin: 12px 0 8px;
}

.card p {
  margin: 0;
  opacity: 0.9;
}

.stats-row {
  display: flex;
  gap: 14px;
  flex-wrap: wrap;
  margin-top: 12px;
  font-size: 13px;
  opacity: 0.9;
}

.faq {
  max-width: 900px;
  margin: 0 auto;
}

.faq-item {
  background: var(--white);
  border: 1px solid var(--light-grey);
  border-radius: 14px;
  overflow: hidden;
  margin-bottom: 10px;
}

.faq-q {
  width: 100%;
  text-align: left;
  padding: 14px 14px;
  border: 0;
  background: transparent;
  color: var(--primary-navy);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  font-weight: 800;
}

.faq-a {
  padding: 0 14px 14px;
  opacity: 0.92;
}

.faq-a[hidden] { display: none; }

.pill-row {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: 18px;
}

.pill {
  border: 1px solid var(--light-grey);
  background: rgba(244,246,248,0.65);
  border-radius: 999px;
  padding: 10px 12px;
  font-weight: 800;
}
html[data-theme="dark"] .pill {
  background: rgba(255,255,255,0.06);
  border-color: rgba(255,255,255,0.14);
}

.donor-feed {
  margin-top: 14px;
  border-top: 1px dashed rgba(28,46,74,0.25);
  padding-top: 12px;
}
html[data-theme="dark"] .donor-feed {
  border-top-color: rgba(255,255,255,0.18);
}

.donor-feed h4 { margin: 0 0 10px; }
.donor-feed .item { font-size: 14px; margin-bottom: 6px; opacity: 0.95; }
.donor-feed .muted { font-size: 13px; opacity: 0.75; }

.counter-box {
  display:flex;
  justify-content:space-around;
  text-align:center;
  gap: 18px;
  flex-wrap: wrap;
}

.counter h2 {
  font-size: 40px;
  margin:0;
}

footer {
  background: var(--dark-navy);
  color: white;
  text-align: center;
  padding: 30px;
}

/* Modal */
.modal {
  display:none;
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:rgba(0,0,0,0.5);
  justify-content:center;
  align-items:center;
  padding: 20px;
  box-sizing: border-box;
}

.modal-content {
  background:white;
  padding:22px;
  width: min(420px, 100%);
  border-radius: 12px;
  box-shadow: var(--shadow);
}

/* Profile */
#profilePage {
  display:none;
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.icon-btn {
  border: 1px solid var(--light-grey);
  background: white;
  border-radius: 10px;
  width: 38px;
  height: 38px;
  cursor: pointer;
}

/* Focus styles */
:focus-visible {
  outline: 3px solid rgba(46,76,115,0.35);
  outline-offset: 2px;
}

@media (min-width: 860px) {
  header { padding: 14px 60px; }
  section { padding: 70px 60px; }
  .hero { padding: 92px 20px; }
  .grid-3 { grid-template-columns: 1fr 1fr 1fr; }
}

@media (max-width: 520px) {
  .row { grid-template-columns: 1fr; }
  header h2 { font-size: 18px; }
}

@media (prefers-reduced-motion: reduce) {
  * { scroll-behavior: auto !important; }
  .btn-primary, .btn-secondary { transition: none; }
  .reveal { opacity: 1; transform: none; transition: none; }
  .confetti-piece { animation: none; }
}
</style>
</head>
<body>

<a class="skip-link" href="#main">Skip to content</a>

<header aria-label="Site header">
  <div class="container" style="display:flex; justify-content:space-between; align-items:center; gap:14px;">
    <h2 style="margin:0;">The Elite Global Humanity Foundation</h2>
    <nav aria-label="Primary navigation">
      <a class="nav-link" href="#donate">Donate</a>
      <button class="nav-link" type="button" id="openLoginBtn">Member Login</button>
      <button class="nav-link" type="button" id="themeToggleBtn" aria-label="Toggle dark mode" title="Toggle dark mode">
        Theme
      </button>
    </nav>
  </div>
</header>

<main id="main">
  <section class="hero" aria-label="Hero section">
    <div class="container">
      <h1 style="margin:0 0 8px;">BUILT ON TRUST</h1>
      <p style="margin:0; opacity:0.95;">Delivering Transparent Global Impact</p>
      <a class="btn-primary" href="#donate" style="display:inline-block; text-decoration:none;">Make a Donation</a>
      <p class="help" style="color: rgba(255,255,255,0.85); margin-top: 16px;">
        Demo site: this page does not process real payments.
      </p>
    </div>
  </section>

<!-- IMPACT COUNTERS -->
<section class="white-section">
  <div class="container">
    <h2 style="text-align:center; margin-top:0;">Our Global Impact</h2>
    <div class="counter-box" aria-label="Impact counters">
      <div class="counter">
        <h2 id="c1" aria-label="Families supported">0</h2>
        <p>Families Supported</p>
      </div>
      <div class="counter">
        <h2 id="c2" aria-label="Children educated">0</h2>
        <p>Children Educated</p>
      </div>
      <div class="counter">
        <h2 id="c3" aria-label="Communities served">0</h2>
        <p>Communities Served</p>
      </div>
    </div>
  </div>
</section>

<!-- STORIES / GALLERY -->
<section class="beige-section" id="stories">
  <div class="container">
    <h2 class="section-title">Faces of impact</h2>
    <p class="lead">
      These are demo visuals. Replace `assets/story-*.svg` with your own authorized photos (recommended) or licensed stock images.
    </p>

    <div class="grid-3" aria-label="Impact stories">
      <article class="card">
        <img src="assets/story-1.svg" alt="Illustration: food relief distribution" loading="lazy" decoding="async">
        <div class="content">
          <span class="tag">Emergency Meals</span>
          <h3>Hot meals when families need it most</h3>
          <p>Rapid-response kits and community kitchens help stabilize households during sudden hardship.</p>
          <div class="stats-row">
            <span><strong>1</strong> kit = <strong>3</strong> days of meals</span>
            <span>•</span>
            <span>Delivered in <strong>24–48h</strong></span>
          </div>
        </div>
      </article>

      <article class="card">
        <img src="assets/story-2.svg" alt="Illustration: child-friendly nutrition support" loading="lazy" decoding="async">
        <div class="content">
          <span class="tag">Child Nutrition</span>
          <h3>Nutrition support for growing kids</h3>
          <p>We prioritize essential nutrition for children through locally sourced, culturally appropriate foods.</p>
          <div class="stats-row">
            <span><strong>₹500</strong> helps fund a week of supplements</span>
            <span>•</span>
            <span>Tracked & reported</span>
          </div>
        </div>
      </article>

      <article class="card">
        <img src="assets/story-3.svg" alt="Illustration: community volunteers serving meals" loading="lazy" decoding="async">
        <div class="content">
          <span class="tag">Community Partners</span>
          <h3>Local partners, real transparency</h3>
          <p>We work with vetted community groups and publish what we deliver, where, and when.</p>
          <div class="stats-row">
            <span>Receipts & reports</span>
            <span>•</span>
            <span>Auditable distribution</span>
          </div>
        </div>
      </article>
    </div>

    <div class="pill-row" aria-label="Highlights">
      <div class="pill">Verified distribution</div>
      <div class="pill">Instant receipts</div>
      <div class="pill">Monthly giving option</div>
    </div>
  </div>
</section>

<!-- PROGRAMS -->
<section class="white-section" id="programs">
  <div class="container">
    <h2 class="section-title">What we fund</h2>
    <p class="lead">Clear programs, measurable outcomes, and transparent reporting.</p>
    <div class="grid-3" aria-label="Programs">
      <article class="card">
        <div class="content">
          <span class="tag">Food</span>
          <h3>Emergency food packs</h3>
          <p>Staples, nutrition, and hygiene essentials delivered with local partners.</p>
        </div>
      </article>
      <article class="card">
        <div class="content">
          <span class="tag">Education</span>
          <h3>School support</h3>
          <p>Meals at school, supplies, and support to keep children learning consistently.</p>
        </div>
      </article>
      <article class="card">
        <div class="content">
          <span class="tag">Water</span>
          <h3>Clean water access</h3>
          <p>Water filters and safe storage solutions to reduce preventable illness.</p>
        </div>
      </article>
    </div>
  </div>
</section>

<!-- DONATION -->
<section id="donate" class="beige-section">
  <div class="container">
    <h2 style="text-align:center; margin-top:0;">Secure Donation</h2>

    <div class="payment-card" role="region" aria-label="Donation form">
      <form id="donationForm">
        <div class="field">
          <label for="amount">Donation amount (INR)</label>
          <input type="number" id="amount" name="amount" placeholder="e.g. 500" min="1" step="1" inputmode="numeric" required>
          <p class="help">You can download an instant receipt after donating.</p>
        </div>

        <div class="field" aria-label="Suggested donation amounts">
          <div class="chip-group" id="amountChips">
            <button class="chip" type="button" data-amount="250" aria-pressed="false">₹250</button>
            <button class="chip" type="button" data-amount="500" aria-pressed="false">₹500</button>
            <button class="chip" type="button" data-amount="1000" aria-pressed="false">₹1,000</button>
            <button class="chip" type="button" data-amount="2500" aria-pressed="false">₹2,500</button>
          </div>
        </div>

        <div class="field">
          <label>Donation frequency</label>
          <div class="segmented" role="group" aria-label="Donation frequency">
            <input type="radio" id="freqOnce" name="donationFrequency" value="one-time" checked>
            <label for="freqOnce">One-time</label>
            <input type="radio" id="freqMonthly" name="donationFrequency" value="monthly">
            <label for="freqMonthly">Monthly</label>
          </div>
          <p class="help">Monthly is a demo toggle (no real subscription is created).</p>
        </div>

        <div class="row">
          <div class="field">
            <label for="donorName">Full name (optional)</label>
            <input id="donorName" name="donorName" autocomplete="name" placeholder="Your name">
          </div>
          <div class="field">
            <label for="donorEmail">Email (optional)</label>
            <input id="donorEmail" name="donorEmail" type="email" autocomplete="email" placeholder="name@example.com">
          </div>
        </div>

        <div class="field">
          <label for="paymentMethod">Payment method</label>
          <select id="paymentMethod" name="paymentMethod">
            <option value="card">Card</option>
            <option value="upi">UPI</option>
          </select>
        </div>

        <div id="card-section" aria-label="Card details">
          <div class="field">
            <label for="cardNumber">Card number (demo)</label>
            <input id="cardNumber" inputmode="numeric" autocomplete="cc-number" placeholder="1234 5678 9012 3456" maxlength="23">
          </div>
          <div class="row">
            <div class="field">
              <label for="cardExpiry">Expiry (MM/YY)</label>
              <input id="cardExpiry" autocomplete="cc-exp" placeholder="MM/YY" maxlength="5">
            </div>
            <div class="field">
              <label for="cardCvv">CVV</label>
              <input id="cardCvv" inputmode="numeric" autocomplete="cc-csc" placeholder="123" maxlength="4">
            </div>
          </div>
          <p class="help">For a real payment flow, you would integrate a payment provider.</p>
        </div>

        <div id="upi-section" style="display:none;" aria-label="UPI payment">
          <div class="qr-box">
            <p style="margin-top:0;"><strong>Scan to Pay</strong></p>
            <img id="upiQr" alt="UPI QR code" src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=elitefoundation@upi">
            <p style="margin-bottom: 10px;">
              UPI ID: <code id="upiId">elitefoundation@upi</code>
            </p>
            <button class="btn-secondary" type="button" id="copyUpiBtn">Copy UPI ID</button>
          </div>
        </div>

        <button class="btn-primary" id="donateBtn" type="submit">Donate Now</button>
        <button class="btn-secondary" id="downloadLastReceiptBtn" type="button" style="margin-left:10px; margin-top:20px;" disabled>
          Download last receipt
        </button>

        <div id="donationNotice" class="notice" hidden></div>

        <div class="donor-feed" aria-label="Recent donors feed">
          <h4>Recent donors (demo)</h4>
          <div id="recentDonors"></div>
          <div class="muted">Names are hidden for privacy.</div>
        </div>
      </form>
    </div>

    <div class="breakdown" aria-label="Where your money goes">
      <h3>Where your money goes</h3>
      <div class="bar" aria-hidden="true">
        <span class="programs"></span><span class="ops"></span><span class="fundraising"></span>
      </div>
      <div class="breakdown-grid">
        <div class="breakdown-item">
          <span><span class="dot" style="background: rgba(15,118,110,0.85);"></span>Programs</span>
          <strong>70%</strong>
        </div>
        <div class="breakdown-item">
          <span><span class="dot" style="background: rgba(46,76,115,0.9);"></span>Operations</span>
          <strong>20%</strong>
        </div>
        <div class="breakdown-item">
          <span><span class="dot" style="background: rgba(180,35,24,0.75);"></span>Fundraising</span>
          <strong>10%</strong>
        </div>
      </div>
      <p class="help" style="margin-top: 12px;">
        Replace these demo percentages with your audited breakdown.
      </p>
    </div>
  </div>
</section>

<!-- FAQ -->
<section class="white-section" id="faq">
  <div class="container">
    <h2 class="section-title">FAQ</h2>
    <p class="lead">Quick answers to common questions (demo content).</p>

    <div class="faq" aria-label="Frequently asked questions">
      <div class="faq-item">
        <button class="faq-q" type="button" aria-expanded="false">
          Is this a real payment page?
          <span aria-hidden="true">+</span>
        </button>
        <div class="faq-a" hidden>
          This is a demo UI. No real payment is processed. Use a payment provider (Stripe/Razorpay/etc.) for production.
        </div>
      </div>

      <div class="faq-item">
        <button class="faq-q" type="button" aria-expanded="false">
          Can I get a receipt?
          <span aria-hidden="true">+</span>
        </button>
        <div class="faq-a" hidden>
          Yes—after donating, use “Download last receipt” to generate a PDF on your device.
        </div>
      </div>

      <div class="faq-item">
        <button class="faq-q" type="button" aria-expanded="false">
          What does monthly mean here?
          <span aria-hidden="true">+</span>
        </button>
        <div class="faq-a" hidden>
          It’s a demo toggle that labels the donation as “monthly”. No subscription is created on this page.
        </div>
      </div>
    </div>
  </div>
</section>

<!-- PROFILE PAGE -->
<section id="profilePage" class="white-section">
  <div class="container">
    <h2 style="margin-top:0;">Member Dashboard</h2>
    <p><strong>Name:</strong> <span id="memberName">Donor Member</span></p>
    <p><strong>Total Donations:</strong> ₹<span id="totalDonation">0</span></p>
    <div id="donationHistory" class="report-box" aria-label="Donation history">
      <strong>Recent donations</strong>
      <div id="donationHistoryList" style="margin-top:10px;"></div>
    </div>
    <button class="btn-primary" id="logoutBtn" type="button">Logout</button>
  </div>
</section>

<footer>
  <div class="container">
    © 2026 The Elite Global Humanity Foundation
  </div>
</footer>

<!-- LOGIN -->
<div class="modal" id="loginModal">
<div class="modal-content">
  <div class="modal-header">
    <h3 id="loginTitle" style="margin:0;">Member Login</h3>
    <button class="icon-btn" type="button" id="closeLoginBtn" aria-label="Close login dialog">✕</button>
  </div>
  <p class="help">Demo only. No credentials are verified or stored.</p>
  <div class="field">
    <label for="loginEmail">Email</label>
    <input id="loginEmail" type="email" autocomplete="email" placeholder="name@example.com">
  </div>
  <div class="field">
    <label for="loginPassword">Password</label>
    <input id="loginPassword" placeholder="••••••••" type="password" autocomplete="current-password">
  </div>
  <button class="btn-primary" id="loginBtn" type="button">Login</button>
</div>
</div>

<div class="confetti" id="confetti" aria-hidden="true"></div>

<script>
function $(id) { return document.getElementById(id); }

const STORAGE_KEY = "charity_demo_v1";
const THEME_KEY = "charity_demo_theme_v1";
const UPI_ID = "elitefoundation@upi";

const state = loadState();
initTheme();
renderTotals();
renderHistory();
renderRecentDonors();

// Impact counters animate when visible
setupCounters();
setupReveals();

// Donation form interactions
$("paymentMethod").addEventListener("change", (e) => togglePayment(e.target.value));
$("donationForm").addEventListener("submit", (e) => {
  e.preventDefault();
  processDonation();
});
$("amountChips").addEventListener("click", (e) => {
  const btn = e.target.closest("button[data-amount]");
  if (!btn) return;
  const amount = sanitizeMoney(btn.getAttribute("data-amount"));
  if (amount === null) return;
  $("amount").value = String(amount);
  $("amount").dispatchEvent(new Event("input", { bubbles: true }));
  $("amount").focus();
});
$("amount").addEventListener("input", () => syncAmountChips());
$("copyUpiBtn").addEventListener("click", async () => {
  await copyText(UPI_ID);
  showNotice("success", "UPI ID copied to clipboard.");
});
$("downloadLastReceiptBtn").addEventListener("click", () => {
  if (!state.lastReceipt) return;
  generateReceipt(state.lastReceipt);
});

// Login modal interactions
$("openLoginBtn").addEventListener("click", openLogin);
$("closeLoginBtn").addEventListener("click", closeLogin);
$("loginBtn").addEventListener("click", login);
$("logoutBtn").addEventListener("click", logout);
$("themeToggleBtn").addEventListener("click", toggleTheme);
$("loginModal").addEventListener("click", (e) => {
  if (e.target === $("loginModal")) closeLogin();
});
document.addEventListener("keydown", (e) => {
  if (e.key === "Escape") closeLogin();
});

// Initialize UPI QR + payment sections
$("upiId").innerText = UPI_ID;
$("upiQr").src = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(UPI_ID)}`;
togglePayment($("paymentMethod").value);
syncAmountChips();
updateThemeToggleButton();

function loadState() {
  try {
    const raw = localStorage.getItem(STORAGE_KEY);
    if (!raw) return { member: null, donations: [], totalDonated: 0, lastReceipt: null };
    const parsed = JSON.parse(raw);
    return {
      member: parsed.member ?? null,
      donations: Array.isArray(parsed.donations) ? parsed.donations : [],
      totalDonated: Number.isFinite(parsed.totalDonated) ? parsed.totalDonated : 0,
      lastReceipt: parsed.lastReceipt ?? null
    };
  } catch {
    return { member: null, donations: [], totalDonated: 0, lastReceipt: null };
  }
}

function saveState() {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
}

function togglePayment(val) {
  $("card-section").style.display = val === "card" ? "block" : "none";
  $("upi-section").style.display = val === "upi" ? "block" : "none";
}

function showNotice(kind, message) {
  const el = $("donationNotice");
  el.className = `notice ${kind === "error" ? "error" : "success"}`;
  el.textContent = message;
  el.hidden = false;
}

function clearNotice() {
  $("donationNotice").hidden = true;
  $("donationNotice").textContent = "";
}

function sanitizeMoney(amount) {
  const n = Number(amount);
  if (!Number.isFinite(n)) return null;
  const i = Math.floor(n);
  if (i <= 0) return null;
  return i;
}

function getSelectedFrequency() {
  const el = document.querySelector('input[name="donationFrequency"]:checked');
  const v = el ? String(el.value) : "one-time";
  return v === "monthly" ? "monthly" : "one-time";
}

function processDonation() {
  clearNotice();

  const amount = sanitizeMoney($("amount").value);
  if (amount === null) {
    showNotice("error", "Please enter a valid donation amount.");
    $("amount").focus();
    return;
  }

  const donorName = String($("donorName").value || "").trim();
  const donorEmail = String($("donorEmail").value || "").trim();
  const method = $("paymentMethod").value;
  const frequency = getSelectedFrequency();

  const receipt = {
    receiptId: `EGHF-${Date.now().toString(36).toUpperCase()}`,
    amount,
    donorName: donorName || null,
    donorEmail: donorEmail || null,
    method,
    frequency,
    dateISO: new Date().toISOString()
  };

  state.totalDonated += amount;
  state.donations.unshift(receipt);
  state.lastReceipt = receipt;
  saveState();

  renderTotals();
  renderHistory();
  renderRecentDonors();

  $("downloadLastReceiptBtn").disabled = false;
  showNotice("success", "Donation recorded. You can download your receipt now.");
  launchConfetti();
}

function renderTotals() {
  $("totalDonation").innerText = (state.totalDonated || 0).toLocaleString();
  $("downloadLastReceiptBtn").disabled = !state.lastReceipt;
}

function renderRecentDonors() {
  const host = $("recentDonors");
  if (!host) return;
  const items = state.donations.slice(0, 4);
  if (items.length === 0) {
    host.innerHTML = `<div class="item">Be the first to donate.</div>`;
    return;
  }
  host.innerHTML = items.map((d) => {
    const when = new Date(d.dateISO).toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" });
    const freq = d.frequency === "monthly" ? "monthly" : "one-time";
    return `<div class="item">₹${Number(d.amount).toLocaleString()} <span class="muted">• ${escapeHtml(freq)} • ${escapeHtml(when)}</span></div>`;
  }).join("");
}

function renderHistory() {
  const list = $("donationHistoryList");
  if (!list) return;
  const items = state.donations.slice(0, 5);
  if (items.length === 0) {
    list.innerHTML = "<div>No donations yet.</div>";
    return;
  }
  list.innerHTML = items.map((d) => {
    const date = new Date(d.dateISO).toLocaleString();
    const name = d.donorName ? ` • ${escapeHtml(d.donorName)}` : "";
    const method = d.method ? ` • ${escapeHtml(d.method.toUpperCase())}` : "";
    const freq = d.frequency === "monthly" ? " • MONTHLY" : "";
    return `<div style="margin-bottom:8px;">
      <strong>₹${Number(d.amount).toLocaleString()}</strong>${name}${method}${freq}
      <div style="font-size:13px; opacity:0.85;">${escapeHtml(d.receiptId)} • ${escapeHtml(date)}</div>
    </div>`;
  }).join("");
}

function generateReceipt(receipt) {
  const jspdf = window.jspdf;
  if (!jspdf || !jspdf.jsPDF) {
    showNotice("error", "Receipt generator not loaded. Please refresh the page.");
    return;
  }
  const { jsPDF } = jspdf;
  const doc = new jsPDF();

  const date = new Date(receipt.dateISO);
  doc.setFontSize(16);
  doc.text("The Elite Global Humanity Foundation", 20, 20);
  doc.setFontSize(12);
  doc.text("Official Donation Receipt (Demo)", 20, 30);
  doc.text(`Receipt ID: ${receipt.receiptId}`, 20, 40);
  doc.text(`Amount: ₹${Number(receipt.amount).toLocaleString()}`, 20, 50);
  doc.text(`Frequency: ${receipt.frequency === "monthly" ? "MONTHLY" : "ONE-TIME"}`, 20, 60);
  doc.text(`Method: ${String(receipt.method || "").toUpperCase()}`, 20, 70);
  doc.text(`Date: ${date.toLocaleDateString()} ${date.toLocaleTimeString()}`, 20, 80);
  if (receipt.donorName) doc.text(`Donor: ${receipt.donorName}`, 20, 95);
  if (receipt.donorEmail) doc.text(`Email: ${receipt.donorEmail}`, 20, 105);
  doc.text("Thank you for your contribution.", 20, 110);
  doc.setFontSize(10);
  doc.text("Note: This receipt was generated by a demo web page and does not represent a processed transaction.", 20, 125, { maxWidth: 170 });
  doc.save(`Donation_Receipt_${receipt.receiptId}.pdf`);
}

function syncAmountChips() {
  const value = sanitizeMoney($("amount").value);
  const chips = $("amountChips").querySelectorAll("button[data-amount]");
  chips.forEach((btn) => {
    const a = sanitizeMoney(btn.getAttribute("data-amount"));
    const pressed = value !== null && a === value;
    btn.setAttribute("aria-pressed", pressed ? "true" : "false");
  });
}

function prefersReducedMotion() {
  return window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
}

function launchConfetti() {
  if (prefersReducedMotion()) return;
  const host = $("confetti");
  if (!host) return;
  host.innerHTML = "";
  const colors = ["#7AA2D6", "#2E4C73", "#0F766E", "#F59E0B", "#EF4444", "#A78BFA"];
  const pieces = 36;
  for (let i = 0; i < pieces; i++) {
    const el = document.createElement("div");
    el.className = "confetti-piece";
    el.style.left = `${Math.random() * 100}vw`;
    el.style.background = colors[Math.floor(Math.random() * colors.length)];
    el.style.animationDelay = `${Math.random() * 180}ms`;
    el.style.animationDuration = `${950 + Math.random() * 550}ms`;
    el.style.transform = `translateY(-10px) rotate(${Math.random() * 180}deg)`;
    host.appendChild(el);
  }
  const maxMs = 1700;
  setTimeout(() => { host.innerHTML = ""; }, maxMs);
}

function initTheme() {
  const saved = localStorage.getItem(THEME_KEY);
  if (saved === "dark" || saved === "light") {
    applyTheme(saved, false);
    return;
  }
  const systemDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
  applyTheme(systemDark ? "dark" : "light", false);
}

function applyTheme(theme, persist = true) {
  const t = theme === "dark" ? "dark" : "light";
  if (t === "dark") document.documentElement.setAttribute("data-theme", "dark");
  else document.documentElement.removeAttribute("data-theme");
  if (persist) localStorage.setItem(THEME_KEY, t);
  updateThemeToggleButton();
}

function toggleTheme() {
  const isDark = document.documentElement.getAttribute("data-theme") === "dark";
  applyTheme(isDark ? "light" : "dark", true);
}

function updateThemeToggleButton() {
  const btn = $("themeToggleBtn");
  if (!btn) return;
  const isDark = document.documentElement.getAttribute("data-theme") === "dark";
  btn.textContent = isDark ? "Light" : "Dark";
  btn.setAttribute("aria-label", isDark ? "Switch to light mode" : "Switch to dark mode");
  btn.setAttribute("title", isDark ? "Switch to light mode" : "Switch to dark mode");
}

function setupReveals() {
  const nodes = document.querySelectorAll("main > section, footer, #profilePage .container, .breakdown");
  if (prefersReducedMotion()) {
    nodes.forEach((n) => n.classList.add("is-visible"));
    return;
  }
  nodes.forEach((n) => n.classList.add("reveal"));
  if (!("IntersectionObserver" in window)) {
    nodes.forEach((n) => n.classList.add("is-visible"));
    return;
  }
  const obs = new IntersectionObserver((entries) => {
    entries.forEach((e) => {
      if (e.isIntersecting) {
        e.target.classList.add("is-visible");
        obs.unobserve(e.target);
      }
    });
  }, { threshold: 0.14 });
  nodes.forEach((n) => obs.observe(n));
}

// FAQ accordion
document.querySelectorAll(".faq-q").forEach((btn) => {
  btn.addEventListener("click", () => {
    const item = btn.closest(".faq-item");
    if (!item) return;
    const answer = item.querySelector(".faq-a");
    const expanded = btn.getAttribute("aria-expanded") === "true";
    btn.setAttribute("aria-expanded", expanded ? "false" : "true");
    if (answer) answer.hidden = expanded;
    const icon = btn.querySelector("span[aria-hidden='true']");
    if (icon) icon.textContent = expanded ? "+" : "−";
  });
});

function openLogin() {
  $("loginModal").style.display = "flex";
  $("loginModal").setAttribute("role", "dialog");
  $("loginModal").setAttribute("aria-modal", "true");
  $("loginModal").setAttribute("aria-labelledby", "loginTitle");
  $("loginEmail").focus();
}

function closeLogin() {
  $("loginModal").style.display = "none";
}

function login() {
  const email = String($("loginEmail").value || "").trim();
  const nameFromEmail = email.includes("@") ? email.split("@")[0] : null;
  state.member = { email: email || null, name: nameFromEmail ? nameFromEmail.split(".").join(" ") : "Donor Member" };
  saveState();
  $("memberName").innerText = state.member.name || "Donor Member";
  $("loginModal").style.display = "none";
  $("profilePage").style.display = "block";
  $("profilePage").scrollIntoView({ behavior: "smooth" });
}

function logout() {
  state.member = null;
  saveState();
  $("profilePage").style.display = "none";
  showNotice("success", "Logged out.");
}

async function copyText(text) {
  if (navigator.clipboard && navigator.clipboard.writeText) {
    await navigator.clipboard.writeText(text);
    return;
  }
  const el = document.createElement("textarea");
  el.value = text;
  el.setAttribute("readonly", "");
  el.style.position = "absolute";
  el.style.left = "-9999px";
  document.body.appendChild(el);
  el.select();
  document.execCommand("copy");
  document.body.removeChild(el);
}

function setupCounters() {
  const counters = [
    { id: "c1", target: 12500 },
    { id: "c2", target: 8400 },
    { id: "c3", target: 320 }
  ];

  const prefersReducedMotion = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
  const run = () => counters.forEach((c) => animateCounter(c.id, c.target, prefersReducedMotion));

  if (!("IntersectionObserver" in window)) {
    run();
    return;
  }

  let hasRun = false;
  const obs = new IntersectionObserver((entries) => {
    if (hasRun) return;
    if (entries.some((e) => e.isIntersecting)) {
      hasRun = true;
      run();
      obs.disconnect();
    }
  }, { threshold: 0.3 });

  const first = $(counters[0].id);
  if (first) obs.observe(first);
}

function animateCounter(id, target, prefersReducedMotion) {
  const el = $(id);
  if (!el) return;
  if (prefersReducedMotion) {
    el.innerText = Number(target).toLocaleString();
    return;
  }
  let count = 0;
  const steps = 60;
  const inc = Math.max(1, Math.round(target / steps));
  const interval = setInterval(() => {
    count += inc;
    if (count >= target) {
      count = target;
      clearInterval(interval);
    }
    el.innerText = Number(count).toLocaleString();
  }, 18);
}

function escapeHtml(str) {
  return String(str)
    .replace(/&/g, "&amp;")
    .replace(/</g, "&lt;")
    .replace(/>/g, "&gt;")
    .replace(/"/g, "&quot;")
    .replace(/'/g, "&#039;");
}
</script>

</body>
</html>
